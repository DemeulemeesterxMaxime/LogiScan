# Plan d'Ex√©cution - Refonte TabBar + Syst√®me de TodoList

**Date**: 17 octobre 2025
**Type**: Refonte majeure avec nouveau syst√®me de gestion de t√¢ches

---

## üéØ Vue d'ensemble

### Objectifs principaux

1. **R√©organiser la TabBar** avec un nouvel ordre et remplacer Dashboard par Profile/Admin
2. **Cr√©er un syst√®me de TodoList** pour g√©rer les t√¢ches de pr√©paration d'√©v√©nements
3. **Impl√©menter un syst√®me de notifications** pour les transitions de t√¢ches
4. **Int√©grer le workflow** avec la finalisation des devis

---

## üì± PHASE 1 : Refonte de la TabBar

### 1.1 Nouvel ordre (gauche ‚Üí droite)

```
1. üì¶ Stock (StockListView)
2. üöö Camion (TrucksListView)
3. üì∏ Scanner (ScannerMainView) - CENTRE
4. üìÖ √âv√©nements (EventsListView)
5. üë§ Profil/Admin (ProfileView OU AdminDashboardView)
```

### 1.2 Logic du 5√®me onglet (Profil/Admin)

**Condition d'affichage** :

- Si `user.role == .admin` ‚Üí **AdminDashboardView** (nouveau)
- Sinon ‚Üí **ProfileView** (existant, avec TodoList personnelle)

**AdminDashboardView** contiendra :

- Dashboard entreprise (stats globales - contenu actuel de DashboardView)
- TodoList g√©n√©rale de l'entreprise
- Acc√®s rapide √† AdminView (gestion membres/codes)

**ProfileView** contiendra :

- Informations personnelles (existant)
- **Mes t√¢ches du jour** (nouveau)
- **T√¢ches de mon entreprise** (nouveau - en libre-service)
- Param√®tres et d√©connexion (existant)

### 1.3 Fichiers √† modifier

- ‚úÖ `MainTabView.swift` : R√©organiser l'ordre des tabs + logique conditionnelle
- ‚úÖ `ProfileView.swift` : Ajouter section TodoList
- ‚úÖ Cr√©er `AdminDashboardView.swift` : Nouvelle vue pour les admins

---

## üìã PHASE 2 : Mod√®les de donn√©es TodoList

### 2.1 Mod√®le `Task`

```swift
@Model
final class Task {
    @Attribute(.unique) var taskId: String
    var title: String
    var description: String?
    var type: TaskType  // Enum des types de t√¢ches
    var status: TaskStatus  // pending, inProgress, completed, cancelled
    var priority: TaskPriority  // low, medium, high, urgent
  
    // Relations
    var eventId: String?  // Li√© √† un √©v√©nement sp√©cifique
    var scanListId: String?  // Li√© √† une liste de scan
    var truckId: String?  // Li√© √† un camion
  
    // Attribution
    var assignedToUserId: String?  // nil = libre-service
    var assignedToUserName: String?
    var createdBy: String  // userId du cr√©ateur
    var companyId: String
  
    // Workflow
    var nextTaskId: String?  // T√¢che suivante (cha√Ænage)
    var previousTaskId: String?  // T√¢che pr√©c√©dente
    var triggerNotification: Bool  // Notifier √† la compl√©tion
  
    // Timestamps
    var createdAt: Date
    var startedAt: Date?
    var completedAt: Date?
    var dueDate: Date?
  
    // M√©tadonn√©es
    var estimatedDuration: Int?  // En minutes
    var location: String?  // Ex: "Stock", "Event", "Camion A"
}
```

### 2.2 Enum `TaskType`

```swift
enum TaskType: String, Codable, CaseIterable {
    // Inventaire
    case inventoryCheck = "inventory_check"  // Faire inventaire
  
    // Stock
    case organizeStock = "organize_stock"  // Ranger le stock
    case prepareItems = "prepare_items"  // Pr√©parer les articles pour liste
  
    // Camion - Chargement
    case loadTruckFromStock = "load_truck_from_stock"  // Remplir camion au stock
    case unloadTruckAtEvent = "unload_truck_at_event"  // D√©charger camion √† l'event
  
    // Camion - Retour
    case loadTruckAtEvent = "load_truck_at_event"  // Charger camion √† l'event
    case unloadTruckAtStock = "unload_truck_at_stock"  // D√©charger camion au stock
    case returnItemsToPlace = "return_items_to_place"  // Remettre √† sa place au stock
  
    // √âv√©nement
    case eventSetup = "event_setup"  // Montage event
    case eventOperation = "event_operation"  // Op√©ration pendant event
    case eventTeardown = "event_teardown"  // D√©montage event
  
    // Scan
    case scanPreparation = "scan_preparation"  // Scanner liste de pr√©paration
    case scanLoading = "scan_loading"  // Scanner chargement
    case scanUnloading = "scan_unloading"  // Scanner d√©chargement
    case scanReturn = "scan_return"  // Scanner retour
  
    // Autres
    case custom = "custom"  // T√¢che personnalis√©e
  
    var displayName: String { ... }
    var icon: String { ... }
    var suggestedLocation: String { ... }
}
```

### 2.3 Enum `TaskStatus`

```swift
enum TaskStatus: String, Codable {
    case pending = "pending"  // En attente
    case inProgress = "in_progress"  // En cours
    case completed = "completed"  // Termin√©e
    case cancelled = "cancelled"  // Annul√©e
    case blocked = "blocked"  // Bloqu√©e (t√¢che pr√©c√©dente non termin√©e)
}
```

### 2.4 Enum `TaskPriority`

```swift
enum TaskPriority: String, Codable {
    case low = "low"
    case medium = "medium"
    case high = "high"
    case urgent = "urgent"
  
    var color: Color { ... }
    var displayName: String { ... }
}
```

### 2.5 Mod√®le `TaskNotification`

```swift
@Model
final class TaskNotification {
    @Attribute(.unique) var notificationId: String
    var taskId: String
    var taskTitle: String
    var recipientUserId: String?  // nil = toute l'√©quipe
    var recipientRole: User.UserRole?  // Pour filtrer par r√¥le
    var type: NotificationType  // taskAssigned, taskCompleted, taskOverdue
    var message: String
    var isRead: Bool
    var createdAt: Date
    var readAt: Date?
}
```

### 2.6 Fichiers √† cr√©er

- ‚úÖ `Task.swift` : Mod√®le principal
- ‚úÖ `TaskNotification.swift` : Mod√®le notifications

---

## üîß PHASE 3 : Services et Repositories

### 3.1 `TaskService.swift`

**Responsabilit√©s** :

- CRUD des t√¢ches
- Gestion du workflow (cha√Ænage)
- Changement de statut
- Attribution/D√©sattribution
- G√©n√©ration de t√¢ches sugg√©r√©es

**M√©thodes principales** :

```swift
class TaskService {
    // CRUD
    func createTask(_ task: Task, modelContext: ModelContext) throws -> Task
    func updateTask(_ task: Task, modelContext: ModelContext) throws
    func deleteTask(taskId: String, modelContext: ModelContext) throws
    func fetchTask(taskId: String) -> Task?
  
    // Workflow
    func completeTask(_ task: Task, modelContext: ModelContext) throws
    func startTask(_ task: Task, userId: String, modelContext: ModelContext) throws
    func cancelTask(_ task: Task, reason: String?, modelContext: ModelContext) throws
  
    // Cha√Ænage
    func linkTasks(currentTask: Task, nextTask: Task) throws
    func unlinkTasks(_ task: Task) throws
    func getNextTask(for task: Task) -> Task?
    func getPreviousTask(for task: Task) -> Task?
  
    // Attribution
    func assignTask(_ task: Task, to userId: String, userName: String) throws
    func unassignTask(_ task: Task) throws  // Retour en libre-service
  
    // Notifications
    func triggerTaskNotification(
        task: Task, 
        type: NotificationType, 
        modelContext: ModelContext
    ) throws
  
    // Suggestions (√† la finalisation du devis)
    func generateSuggestedTasks(
        for event: Event,
        quoteItems: [QuoteItem],
        modelContext: ModelContext
    ) throws -> [Task]
}
```

### 3.2 `TaskNotificationService.swift`

**Responsabilit√©s** :

- Cr√©er des notifications
- Marquer comme lues
- R√©cup√©rer notifications non lues
- Envoyer push notifications (future phase)

**M√©thodes principales** :

```swift
class TaskNotificationService {
    func createNotification(
        taskId: String,
        taskTitle: String,
        recipientUserId: String?,
        type: NotificationType,
        message: String,
        modelContext: ModelContext
    ) throws
  
    func markAsRead(notificationId: String, modelContext: ModelContext) throws
    func fetchUnreadNotifications(for userId: String) -> [TaskNotification]
    func deleteNotification(notificationId: String, modelContext: ModelContext) throws
}
```

### 3.3 Fichiers √† cr√©er

- ‚úÖ `TaskService.swift`
- ‚úÖ `TaskNotificationService.swift`

---

## üé® PHASE 4 : Interfaces utilisateur

### 4.1 Vue principale : `TodoListView.swift`

**Affichage** :

- Onglets : "Mes t√¢ches" / "Libre-service" / "Toutes" (si admin/manager)
- Filtres : Statut, Priorit√©, Type, Date
- Groupement par statut avec sections collapsibles
- Recherche par titre/√©v√©nement

**Actions** :

- Cr√©er une t√¢che ( uniquement via admin )
- Prendre une t√¢che en libre-service
- Marquer comme termin√©e
- Voir d√©tails
- Modifier/Supprimer (si cr√©ateur ou admin)
- sugg√©r√© une tache ( envoie une notification a l'admin pour la valider )

### 4.2 Vue d√©tail : `TaskDetailView.swift`

**Sections** :

- Informations g√©n√©rales (titre, description, type, priorit√©)
- Attribution (qui, quand)
- Workflow (t√¢che pr√©c√©dente, suivante)
- √âv√©nement/Camion/Liste li√©s
- Timeline (cr√©√©e, d√©marr√©e, termin√©e)
- Actions (D√©marrer, Terminer, Annuler, R√©attribuer)

### 4.3 Vue cr√©ation : `CreateTaskView.swift`

**Formulaire** :

- Titre (requis)
- Description
- Type (picker avec ic√¥nes)
- Priorit√© (segmented control)
- Attribution (picker utilisateurs + option libre-service)
- Date d'√©ch√©ance
- Dur√©e estim√©e
- Liens (√©v√©nement, camion, liste de scan)
- Cha√Ænage (t√¢che suivante)
- Notification √† la compl√©tion (toggle)

### 4.4 Vue liste pour Admin : `AdminTaskManagementView.swift`

**Fonctionnalit√©s admin** :

- Vue de toutes les t√¢ches de l'entreprise
- Statistiques (en cours, compl√©t√©es aujourd'hui, en retard)
- R√©attribution en masse
- Vue par utilisateur
- Vue par √©v√©nement
- Export/Rapport

### 4.5 Composants r√©utilisables

- `TaskCard.swift` : Card compact pour liste
- `TaskRow.swift` : Row pour tableau
- `TaskStatusBadge.swift` : Badge de statut color√©
- `TaskPriorityIndicator.swift` : Indicateur de priorit√©
- `TaskTypeIcon.swift` : Ic√¥ne selon le type
- `TaskWorkflowView.swift` : Visualisation du workflow

### 4.6 Fichiers √† cr√©er

- ‚úÖ `TodoListView.swift`
- ‚úÖ `TaskDetailView.swift`
- ‚úÖ `CreateTaskView.swift`
- ‚úÖ `AdminTaskManagementView.swift`
- ‚úÖ `TaskCard.swift`
- ‚úÖ `TaskRow.swift`
- ‚úÖ `TaskStatusBadge.swift`
- ‚úÖ `TaskPriorityIndicator.swift`
- ‚úÖ `TaskTypeIcon.swift`
- ‚úÖ `TaskWorkflowView.swift`

---

## üîó PHASE 5 : Int√©gration avec workflow existant

### 5.1 G√©n√©ration automatique √† la finalisation du devis

**Dans `CartDetailView.swift` ou service de devis** :

```swift
// Apr√®s finalisation du devis
func finalizeQuote() async {
    // ... Logique existante ...
  
    // G√©n√©rer les t√¢ches sugg√©r√©es
    let taskService = TaskService()
    let suggestedTasks = try taskService.generateSuggestedTasks(
        for: event,
        quoteItems: quoteItems,
        modelContext: modelContext
    )
  
    // Afficher modal de suggestion
    showTaskSuggestionSheet = true
    self.suggestedTasks = suggestedTasks
}
```

**Modal `TaskSuggestionView.swift`** :

- Liste des t√¢ches sugg√©r√©es
- Possibilit√© de modifier attribution
- Possibilit√© d'ajouter/supprimer des t√¢ches
- Visualisation du workflow (ordre des t√¢ches)
- Validation pour cr√©er toutes les t√¢ches
- confirmation de g√©n√©ration des listes de scan pour stock vers √ßamion, √ßamion vers event, event vers √ßamion, √ßamion vers stocks, chaque liste avec un nom coh√©rent

### 5.2 T√¢ches sugg√©r√©es typiques pour un √©v√©nement

**Workflow complet sugg√©r√©** :

```
1. üìã Cr√©er liste de scan (auto-g√©n√©r√©e) ‚Üí Attribution sugg√©r√©e : Manager
   ‚Üì
2. üì¶ Pr√©parer articles au stock ‚Üí Attribution sugg√©r√©e : Employ√© 1
   ‚Üì
3. üì∏ Scanner pr√©paration ‚Üí Attribution sugg√©r√©e : Employ√© 1
   ‚Üì
4. üöö Charger camion au stock ‚Üí Attribution sugg√©r√©e : Employ√© 2
   ‚Üì
5. üì∏ Scanner chargement ‚Üí Attribution sugg√©r√©e : Employ√© 2
   ‚Üì
6. üöö Transport vers event ‚Üí Attribution sugg√©r√©e : Chauffeur
   ‚Üì
7. üöö D√©charger camion √† l'event ‚Üí Libre-service (√©quipe event)
   ‚Üì
8. üì∏ Scanner d√©chargement ‚Üí Libre-service
   ‚Üì
9. üé™ Montage/Installation ‚Üí Libre-service
   ‚Üì
10. ‚è∞ Op√©ration event ‚Üí Libre-service
   ‚Üì
11. üì¶ D√©montage ‚Üí Libre-service
   ‚Üì
12. üöö Charger camion √† l'event ‚Üí Libre-service
   ‚Üì
13. üì∏ Scanner chargement retour ‚Üí Libre-service
   ‚Üì
14. üöö Transport retour ‚Üí Attribution sugg√©r√©e : Chauffeur
   ‚Üì
15. üöö D√©charger camion au stock ‚Üí Attribution sugg√©r√©e : Employ√© 3
   ‚Üì
16. üì∏ Scanner retour ‚Üí Attribution sugg√©r√©e : Employ√© 3
   ‚Üì
17. üì¶ Ranger articles au stock ‚Üí Attribution sugg√©r√©e : Employ√© 3
```

### 5.3 Logique de notification

**Sc√©nario 1** : T√¢che attribu√©e ‚Üí T√¢che attribu√©e

```swift
// Maxime termine sa t√¢che ‚Üí Romain est notifi√©
if currentTask.nextTaskId != nil,
   let nextTask = taskService.fetchTask(nextTask.nextTaskId!),
   let assigneeUserId = nextTask.assignedToUserId {
  
    taskNotificationService.createNotification(
        taskId: nextTask.taskId,
        taskTitle: nextTask.title,
        recipientUserId: assigneeUserId,
        type: .taskReady,
        message: "La t√¢che '\(nextTask.title)' est pr√™te √† √™tre d√©marr√©e",
        modelContext: modelContext
    )
}
```

**Sc√©nario 2** : T√¢che attribu√©e ‚Üí T√¢che libre-service

```swift
// Maxime termine ‚Üí Toute l'√©quipe est notifi√©e
if currentTask.nextTaskId != nil,
   let nextTask = taskService.fetchTask(nextTask.nextTaskId!),
   nextTask.assignedToUserId == nil {
  
    // Notification pour tous les membres de l'entreprise
    taskNotificationService.createNotification(
        taskId: nextTask.taskId,
        taskTitle: nextTask.title,
        recipientUserId: nil,  // nil = broadcast
        type: .taskAvailable,
        message: "Nouvelle t√¢che disponible : '\(nextTask.title)'",
        modelContext: modelContext
    )
}
```

### 5.4 Fichiers √† modifier

- ‚úÖ Service de finalisation de devis (CartDetailView ou √©quivalent)
- ‚úÖ Cr√©er `TaskSuggestionView.swift`

---

## üîî PHASE 6 : Syst√®me de notifications

### 6.1 Badge sur l'onglet Profile/Admin

```swift
// Dans MainTabView.swift
.badge(unreadNotificationsCount)
```

### 6.2 Centre de notifications

**NotificationCenterView.swift** :

- Liste des notifications non lues en haut
- Liste des notifications lues en dessous
- Actions : Marquer comme lu, Voir t√¢che, Supprimer
- Filtres par type

### 6.3 Notifications en temps r√©el (phase future)

- Int√©gration Firebase Cloud Messaging
- Push notifications natives iOS
- Badge sur ic√¥ne de l'app

### 6.4 Fichiers √† cr√©er

- ‚úÖ `NotificationCenterView.swift`
- ‚úÖ Badge logic dans MainTabView

---

## üìä PHASE 7 : Dashboard Admin am√©lior√©

### 7.1 Contenu AdminDashboardView

**Section 1 : Stats globales**

- √âv√©nements actifs
- T√¢ches en cours / compl√©t√©es aujourd'hui
- Mouvements du jour
- Statut stock

**Section 2 : TodoList entreprise**

- T√¢ches urgentes
- T√¢ches en retard
- T√¢ches non attribu√©es (libre-service)
- Vue par √©v√©nement

**Section 3 : Activit√© √©quipe**

- Qui fait quoi (t√¢ches en cours par personne)
- Performance (t√¢ches compl√©t√©es/jour par personne)
- Graphiques temporels

**Section 4 : Actions rapides**

- Cr√©er une t√¢che
- Voir toutes les t√¢ches
- G√©rer l'√©quipe (lien vers AdminView)
- Voir les notifications

### 7.2 D√©placer contenu actuel de DashboardView

- M√©triques ‚Üí AdminDashboardView (section stats)
- Graphiques ‚Üí AdminDashboardView (section activit√©)
- Actions rapides ‚Üí Conserver mais adapter

---

## üóÇÔ∏è Structure des fichiers √† cr√©er/modifier

```
LogiScan/
‚îú‚îÄ‚îÄ Domain/
‚îÇ   ‚îî‚îÄ‚îÄ Models/
‚îÇ       ‚îú‚îÄ‚îÄ Task.swift ‚≠êÔ∏è NOUVEAU
‚îÇ       ‚îî‚îÄ‚îÄ TaskNotification.swift ‚≠êÔ∏è NOUVEAU
‚îÇ
‚îú‚îÄ‚îÄ Domain/
‚îÇ   ‚îî‚îÄ‚îÄ Services/
‚îÇ       ‚îú‚îÄ‚îÄ TaskService.swift ‚≠êÔ∏è NOUVEAU
‚îÇ       ‚îî‚îÄ‚îÄ TaskNotificationService.swift ‚≠êÔ∏è NOUVEAU
‚îÇ
‚îú‚îÄ‚îÄ UI/
‚îÇ   ‚îú‚îÄ‚îÄ MainTabView.swift ‚úèÔ∏è MODIFIER
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminView.swift ‚úèÔ∏è MODIFIER (acc√®s depuis dashboard)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AdminDashboardView.swift ‚≠êÔ∏è NOUVEAU
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Profile/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProfileView.swift ‚úèÔ∏è MODIFIER (ajouter TodoList section)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Tasks/ ‚≠êÔ∏è NOUVEAU DOSSIER
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TodoListView.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskDetailView.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateTaskView.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskSuggestionView.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminTaskManagementView.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NotificationCenterView.swift
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Components/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ TaskCard.swift
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ TaskRow.swift
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ TaskStatusBadge.swift
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ TaskPriorityIndicator.swift
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ TaskTypeIcon.swift
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ TaskWorkflowView.swift
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Events/
‚îÇ       ‚îî‚îÄ‚îÄ CartDetailView.swift ‚úèÔ∏è MODIFIER (int√©gration suggestion t√¢ches)
‚îÇ
‚îî‚îÄ‚îÄ Data/
    ‚îî‚îÄ‚îÄ Firebase/
        ‚îî‚îÄ‚îÄ Services/
            ‚îî‚îÄ‚îÄ FirebaseTaskService.swift ‚≠êÔ∏è NOUVEAU (sync Firebase)
```

---

## üìÖ Timeline d'ex√©cution sugg√©r√©e

### Sprint 1 (2-3 jours) : TabBar + Mod√®les

- ‚úÖ R√©organiser TabBar
- ‚úÖ Cr√©er AdminDashboardView basique
- ‚úÖ Cr√©er mod√®les Task et TaskNotification
- ‚úÖ Tester la persistence SwiftData

### Sprint 2 (3-4 jours) : Services + CRUD basique

- ‚úÖ Impl√©menter TaskService
- ‚úÖ Impl√©menter TaskNotificationService
- ‚úÖ Cr√©er TodoListView basique (liste des t√¢ches)
- ‚úÖ Cr√©er CreateTaskView
- ‚úÖ Cr√©er TaskDetailView

### Sprint 3 (3-4 jours) : Workflow + Attribution

- ‚úÖ Impl√©menter syst√®me de cha√Ænage
- ‚úÖ Impl√©menter attribution/libre-service
- ‚úÖ Cr√©er composants UI (cards, badges, etc.)
- ‚úÖ Int√©grer filtres et recherche

### Sprint 4 (2-3 jours) : Notifications

- ‚úÖ Impl√©menter logique de notifications
- ‚úÖ Cr√©er NotificationCenterView
- ‚úÖ Ajouter badges sur TabBar
- ‚úÖ Tester sc√©narios de notification

### Sprint 5 (3-4 jours) : Int√©gration devis

- ‚úÖ Impl√©menter g√©n√©ration de t√¢ches sugg√©r√©es
- ‚úÖ Cr√©er TaskSuggestionView
- ‚úÖ Int√©grer avec finalisation de devis
- ‚úÖ Tester workflow complet

### Sprint 6 (2-3 jours) : Dashboard Admin

- ‚úÖ Compl√©ter AdminDashboardView avec stats
- ‚úÖ Cr√©er AdminTaskManagementView
- ‚úÖ Ajouter graphiques et m√©triques
- ‚úÖ Migrer contenu de l'ancien DashboardView

### Sprint 7 (2 jours) : Polish + Tests

- ‚úÖ Animations et transitions
- ‚úÖ Tests de sc√©narios complets
- ‚úÖ Corrections de bugs
- ‚úÖ Documentation

**Total estim√© : 17-23 jours** (3-5 semaines)

---

## üéØ Points d'attention

### S√©curit√©

- ‚úÖ V√©rifier permissions avant cr√©ation/modification de t√¢ches
- ‚úÖ Seul le cr√©ateur ou admin peut supprimer une t√¢che
- ‚úÖ Validation que l'utilisateur appartient √† la bonne companyId

### Performance

- ‚úÖ Utiliser LazyVStack pour listes longues
- ‚úÖ Pagination si > 100 t√¢ches
- ‚úÖ Indexer les queries fr√©quentes (companyId, assignedToUserId, status)

### UX

- ‚úÖ Animations pour changement de statut
- ‚úÖ Confirmation avant suppression
- ‚úÖ Feedback visuel (haptics) pour actions importantes
- ‚úÖ Empty states clairs

### Firebase

- ‚úÖ Synchronisation bidirectionnelle
- ‚úÖ Gestion offline (SwiftData comme cache)
- ‚úÖ R√®gles Firestore pour tasks et notifications

---

## ‚ùì Questions √† clarifier

1. **Attribution par d√©faut** : Quand une t√¢che sugg√©r√©e n'a pas de personne sp√©cifique, faut-il sugg√©rer selon les r√¥les (ex: Manager pour cr√©ation liste) ?
2. **Notifications push** : Impl√©menter d√®s maintenant ou dans une phase 2 ?
3. **T√¢ches r√©currentes** : Besoin de t√¢ches qui se r√©p√®tent (ex: inventaire hebdomadaire) ?
4. **Sous-t√¢ches** : Les t√¢ches peuvent-elles avoir des sous-t√¢ches (checklist) ?
5. **Pi√®ces jointes** : Besoin d'attacher des photos/documents √† une t√¢che ?
6. **Commentaires** : Les t√¢ches peuvent-elles avoir des commentaires/notes entre membres ?
7. **Dur√©e r√©elle vs estim√©e** : Tracker le temps r√©el pass√© sur une t√¢che ?
8. **G√©olocalisation** : V√©rifier que l'utilisateur est au bon endroit pour certaines t√¢ches ?
9. **Dashboard personnel** : Faut-il un dashboard pour les employ√©s non-admin (stats perso) ?
10. **Export** : Besoin d'exporter les t√¢ches en PDF/Excel pour reporting ?

---

## üöÄ Validation requise

Merci de valider les points suivants avant de commencer :

- ‚úÖ Structure g√©n√©rale et workflow
- ‚úÖ Mod√®les de donn√©es propos√©s
- ‚úÖ Interface et navigation
- ‚úÖ Int√©gration avec devis
- ‚úÖ Syst√®me de notifications
- ‚úÖ Timeline propos√©e
- ‚úÖ Questions √† clarifier

Une fois valid√©, nous commencerons par la **Phase 1 : Refonte TabBar** ! üéâ
